"use strict";$(function(){var e=$('input[type="checkbox"]'),s=$(".whole_check"),t=$(".cartBox"),c=$(".shopChoice"),a=$(".son_check");e.click(function(){$(this).is(":checked")?$(this).next("label").addClass("mark"):$(this).next("label").removeClass("mark")}),s.click(function(){var e=t.find('input[type="checkbox"]');$(this).is(":checked")?(e.prop("checked",!0),e.next("label").addClass("mark")):(e.prop("checked",!1),e.next("label").removeClass("mark")),o()}),a.each(function(){$(this).click(function(){var e,t;$(this).is(":checked")?(e=a.length,t=0,a.each(function(){$(this).is(":checked")&&t++}),t==e&&(s.prop("checked",!0),s.next("label").addClass("mark"))):(s.prop("checked",!1),s.next("label").removeClass("mark"))})}),c.each(function(){$(this).click(function(){var e,t;$(this).is(":checked")?(e=c.length,t=0,c.each(function(){$(this).is(":checked")&&t++}),t==e&&(s.prop("checked",!0),s.next("label").addClass("mark")),$(this).parents(".cartBox").find(".son_check").prop("checked",!0),$(this).parents(".cartBox").find(".son_check").next("label").addClass("mark")):(s.prop("checked",!1),s.next("label").removeClass("mark"),$(this).parents(".cartBox").find(".son_check").prop("checked",!1),$(this).parents(".cartBox").find(".son_check").next("label").removeClass("mark")),o()})}),t.each(function(){var s=$(this).find(".son_check");s.each(function(){$(this).click(function(){var e,t;$(this).is(":checked")?(e=s.length,t=0,s.each(function(){$(this).is(":checked")&&t++}),t==e&&($(this).parents(".cartBox").find(".shopChoice").prop("checked",!0),$(this).parents(".cartBox").find(".shopChoice").next("label").addClass("mark"))):($(this).parents(".cartBox").find(".shopChoice").prop("checked",!1),$(this).parents(".cartBox").find(".shopChoice").next("label").removeClass("mark")),o()})})});var i=$(".plus"),n=$(".reduce"),e=$(".sum");i.click(function(){var e=$(this).prev("input"),t=parseInt(e.val())+1,s=$(this).parents(".amount_box").find(".reduce"),c=$(this).parents(".order_lists").find(".sum_price"),a=$(this).parents(".order_lists").find(".price").html(),a=t*parseInt(a.substring(1));e.val(t),c.html("￥"+a),1<e.val()&&s.hasClass("reSty")&&s.removeClass("reSty"),o()}),n.click(function(){var e=$(this).next("input"),t=parseInt(e.val())-1,s=$(this).parents(".order_lists").find(".sum_price"),c=$(this).parents(".order_lists").find(".price").html(),c=t*parseInt(c.substring(1));1<e.val()&&(e.val(t),s.html("￥"+c)),1!=e.val()||$(this).hasClass("reSty")||$(this).addClass("reSty"),o()}),e.keyup(function(){var e,t,s=$(this).parents(".order_lists").find(".sum_price"),c=$(this).parents(".order_lists").find(".price").html();""==$(this).val()&&$(this).val("1"),$(this).val($(this).val().replace(/\D|^0/g,"")),t=(e=$(this).val())*parseInt(c.substring(1)),$(this).attr("value",e),s.html("￥"+t),o()});var r=null,l="";function h(){$(".model_bg").fadeOut(300),$(".my_model").fadeOut(300)}function o(){var s=0,c=0,e=$(".calBtn a");a.each(function(){var e,t;$(this).is(":checked")&&(e=parseInt($(this).parents(".order_lists").find(".sum_price").html().substring(1)),t=parseInt($(this).parents(".order_lists").find(".sum").val()),s+=e,c+=t)}),$(".total_text").html("￥"+s),$(".piece_num").html(c),0!=s&&0!=c?e.hasClass("btn_sty")||e.addClass("btn_sty"):e.hasClass("btn_sty")&&e.removeClass("btn_sty")}$(".delBtn").click(function(){r=$(this).parents(".order_lists"),l=r.parents(".order_content"),$(".model_bg").fadeIn(300),$(".my_model").fadeIn(300)}),$(".closeModel").click(function(){h()}),$(".dialog-close").click(function(){h()}),$(".dialog-sure").click(function(){r.remove(),null!=l.html().trim()&&0!=l.html().trim().length||l.parents(".cartBox").remove(),h(),a=$(".son_check"),o()})});